# 文件重命名工具 - 映射组件

## 🎯 项目概述

这是一个功能强大的文件重命名工具，支持通过映射规则批量替换文件名中的特定文本。项目采用模块化设计，提供了从基础到高级的完整功能。

## 📁 项目文件结构

```
FileRenameEditor/
├── 🐍 Python核心文件
│   ├── mapping_widget.py              # 基础版映射组件
│   ├── enhanced_mapping_widget.py     # 增强版映射组件
│   ├── mapping_persistence.py         # 持久化存储模块
│   ├── main_with_mapping_integrated.py # 集成版主程序
│   ├── final_mapping_app.py           # 最终版完整应用
│   ├── mapping_demo.py                # 演示程序
│   └── test_mapping.py                # 测试程序
│
├── 🚀 Windows可执行脚本
│   ├── 启动映射工具.bat               # 主启动器（批处理）
│   ├── 启动映射工具.ps1               # 主启动器（PowerShell）
│   ├── run_mapping_tool.bat           # 直接运行最终版
│   ├── run_demo.bat                   # 直接运行演示
│   ├── run_test.bat                   # 直接运行测试
│   └── 安装检查.bat                   # 环境检查脚本
│
├── 📖 文档文件
│   ├── README.md                      # 详细使用说明
│   ├── 使用说明.txt                   # 快速使用指南
│   └── 项目说明.md                    # 项目概述（本文件）
│
└── 📂 运行时目录
    └── mapping_configs/               # 映射配置存储目录（自动创建）
```

## 🚀 快速开始

### 方法一：使用启动器（推荐）
1. 双击 `启动映射工具.bat` 或 `启动映射工具.ps1`
2. 选择要运行的程序
3. 按照界面提示操作

### 方法二：直接运行
- **完整应用**: 双击 `run_mapping_tool.bat`
- **演示程序**: 双击 `run_demo.bat`
- **测试程序**: 双击 `run_test.bat`

### 方法三：命令行运行
```bash
python final_mapping_app.py      # 最终版应用
python mapping_demo.py           # 演示程序
python test_mapping.py           # 测试程序
```

## 🛠️ 系统要求

- **操作系统**: Windows 7/8/10/11
- **Python版本**: 3.7 或更高版本
- **依赖模块**: tkinter, re, json, os（通常随Python安装）
- **额外软件**: 无需安装其他软件

## 🔧 安装检查

运行 `安装检查.bat` 可以：
- ✅ 检查Python环境
- ✅ 验证必要模块
- ✅ 检查项目文件完整性
- ✅ 测试程序运行
- ✅ 创建必要目录

## 🎨 功能特点

### 核心功能
- **映射替换**: 创建key-value映射规则
- **批量处理**: 一次性处理多个文件
- **实时预览**: 重命名前预览效果
- **错误处理**: 完善的异常处理机制

### 高级功能
- **正则表达式**: 支持复杂的模式匹配
- **大小写控制**: 可选择区分/不区分大小写
- **配置管理**: 保存和加载映射配置
- **批量操作**: 批量添加、导入、导出规则

### 用户界面
- **直观设计**: 清晰的选项卡式布局
- **实时反馈**: 操作状态实时显示
- **错误提示**: 友好的错误信息
- **帮助系统**: 内置使用说明

## 📋 使用示例

### 基础文本替换
```
输入: IMG_20231201_143022.jpg
映射: IMG_ → 照片_, 2023 → 2023年, _ → (空格)
输出: 照片_2023年1201 143022.jpg
```

### 正则表达式替换
```
输入: DSC_20231201_001.jpg
映射: \d{4}(\d{2})(\d{2}) → \1月\2日
输出: DSC_12月01日_001.jpg
```

### 文档重命名
```
输入: doc_temp_report_v1.docx
映射: doc_ → 文档_, temp_ → 临时_, _v → _版本
输出: 文档_临时_报告_版本1.docx
```

## 🎯 适用场景

- **照片整理**: 相机照片批量重命名
- **文档管理**: 统一文档命名格式
- **文件归档**: 批量文件分类整理
- **数据清理**: 清理不规范的文件名
- **批量处理**: 大量文件的统一处理

## 🔍 故障排除

### 常见问题
1. **Python未找到**: 安装Python并添加到PATH
2. **模块缺失**: 检查Python安装是否完整
3. **权限错误**: 以管理员身份运行
4. **文件损坏**: 重新下载项目文件

### 解决步骤
1. 运行 `安装检查.bat` 诊断问题
2. 检查Python版本和PATH设置
3. 验证所有.py文件完整性
4. 检查目标文件夹权限

## 📈 技术特点

- **MVC架构**: 清晰的代码结构
- **模块化设计**: 组件可独立使用
- **类型提示**: 完整的类型注解
- **错误处理**: 完善的异常处理
- **用户友好**: 直观的操作界面

## 🔮 扩展开发

### 添加新功能
```python
# 继承基础组件
class CustomMappingWidget(EnhancedMappingListWidget):
    def custom_mapping_logic(self):
        # 实现自定义逻辑
        pass
```

### 集成到其他项目
```python
# 导入映射组件
from enhanced_mapping_widget import EnhancedMappingListWidget

# 在现有应用中使用
mapping_widget = EnhancedMappingListWidget(parent)
```

## 📞 技术支持

如遇问题，请按以下顺序检查：
1. 运行安装检查脚本
2. 查看错误信息
3. 检查系统要求
4. 验证文件完整性

## 📄 许可证

本项目采用MIT许可证，可自由使用和修改。

---

**🎉 享受高效的文件重命名体验！**
