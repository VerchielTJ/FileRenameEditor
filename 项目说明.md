# 文件重命名工具 - 项目说明

## 🎯 项目概述

这是一个功能强大的文件重命名工具，支持通过前缀后缀和映射规则批量重命名文件。项目采用MVC架构设计，提供了清晰的代码结构和良好的可维护性。

## 📁 重构后的项目结构

```
FileRenameEditor/
├── 🐍 核心应用程序
│   ├── app.py                          # 主应用程序入口
│   └── main.py                         # 程序启动入口
│
├── 📂 MVC架构模块
│   ├── models/                         # 数据模型层
│   │   ├── __init__.py
│   │   └── file_manager.py            # 文件管理器
│   ├── views/                          # 视图层
│   │   ├── __init__.py
│   │   ├── main_window.py             # 主窗口界面
│   │   └── components/                # UI组件
│   │       ├── __init__.py
│   │       └── mapping_widget.py      # 映射组件
│   └── controllers/                    # 控制器层
│       ├── __init__.py
│       └── rename_controller.py       # 重命名控制器
│
├── 🔧 配置和工具模块
│   ├── config/                         # 配置模块
│   │   └── __init__.py
│   ├── core/                          # 核心模块
│   │   └── __init__.py
│   ├── gui/                           # GUI模块
│   │   └── __init__.py
│   └── utils/                         # 工具模块
│       └── __init__.py
│
├── 🚀 Windows启动脚本
│   ├── 启动映射工具.bat               # 主启动器（批处理）
│   ├── 启动映射工具.ps1               # 主启动器（PowerShell）
│   └── 安装检查.bat                   # 环境检查脚本
│
├── 📖 文档文件
│   ├── README.md                      # 详细使用说明
│   ├── 使用说明.txt                   # 快速使用指南
│   ├── 项目说明.md                    # 项目概述（本文件）
│   └── requirements.txt               # 依赖包列表
│
└── 📂 运行时目录（自动创建）
    └── mapping_configs/               # 映射配置存储目录
```

## 🏗️ 架构设计

### MVC模式
项目采用经典的MVC（Model-View-Controller）架构模式：

- **Model (模型层)**: 负责数据管理和业务逻辑
  - `FileManager`: 处理文件操作和目录管理
  
- **View (视图层)**: 负责用户界面和用户交互
  - `MainWindow`: 主窗口界面
  - `MappingWidget`: 映射规则管理组件
  
- **Controller (控制器层)**: 负责协调模型和视图
  - `RenameController`: 处理重命名业务逻辑

### 组件化设计
- **模块化**: 每个功能模块独立，便于维护和测试
- **可扩展**: 易于添加新功能和组件
- **可复用**: 组件可以在其他项目中复用

## 🚀 快速开始

### 方法一：使用启动器（推荐）
1. 双击 `启动映射工具.bat` 或 `启动映射工具.ps1`
2. 选择要运行的程序
3. 按照界面提示操作

### 方法二：直接运行
```bash
python main.py
```

### 方法三：使用应用程序入口
```bash
python app.py
```

## 🛠️ 系统要求

- **操作系统**: Windows 7/8/10/11
- **Python版本**: 3.7 或更高版本
- **依赖模块**: tkinter, os, pathlib（通常随Python安装）
- **额外软件**: 无需安装其他软件

## 🔧 安装检查

运行 `安装检查.bat` 可以：
- ✅ 检查Python环境
- ✅ 验证必要模块
- ✅ 检查项目文件完整性
- ✅ 测试程序运行
- ✅ 创建必要目录

## 🎨 功能特点

### 核心功能
- **前缀后缀**: 为文件名添加前缀或后缀
- **映射替换**: 创建key-value映射规则，批量替换文件名中的特定文本
- **实时预览**: 重命名前预览效果
- **批量操作**: 一次性处理多个文件
- **错误处理**: 完善的异常处理机制

### 高级功能
- **MVC架构**: 清晰的代码结构
- **模块化设计**: 组件可独立使用
- **类型提示**: 完整的类型注解
- **错误处理**: 完善的异常处理
- **用户友好**: 直观的操作界面

## 📋 使用示例

### 基础文本替换
```
输入: IMG_20231201_143022.jpg
映射: IMG_ → 照片_, 2023 → 2023年, _ → (空格)
输出: 照片_2023年1201 143022.jpg
```

### 前缀后缀处理
```
输入: document.pdf
前缀: 重要_
后缀: _v1
输出: 重要_document_v1.pdf
```

### 文档重命名
```
输入: doc_temp_report_v1.docx
映射: doc_ → 文档_, temp_ → 临时_, _v → _版本
输出: 文档_临时_报告_版本1.docx
```

## 🎯 适用场景

- **照片整理**: 相机照片批量重命名
- **文档管理**: 统一文档命名格式
- **文件归档**: 批量文件分类整理
- **数据清理**: 清理不规范的文件名
- **批量处理**: 大量文件的统一处理

## 🔍 重构改进

### 删除的多余文件
- `mapping_demo.py` - 演示程序
- `test_mapping.py` - 测试程序
- `main_mvc.py` - MVC版本示例
- `main_with_mapping.py` - 集成版本示例
- `main_with_mapping_integrated.py` - 集成版本示例
- `final_mapping_app.py` - 最终版本示例
- `mapping_widget.py` - 旧版映射组件
- `enhanced_mapping_widget.py` - 增强版映射组件
- `mapping_persistence.py` - 持久化存储模块
- `run_demo.bat` - 演示启动脚本
- `run_test.bat` - 测试启动脚本
- `run_mapping_tool.bat` - 映射工具启动脚本

### 重构后的优势
1. **清晰的架构**: 采用标准MVC模式
2. **模块化设计**: 功能模块独立，便于维护
3. **代码复用**: 组件可在其他项目中复用
4. **易于扩展**: 添加新功能更加简单
5. **更好的测试**: 模块化便于单元测试

## 🔮 扩展开发

### 添加新功能
```python
# 在controllers中添加新的控制器
class NewFeatureController:
    def __init__(self, view, model):
        self.view = view
        self.model = model
    
    def new_feature_method(self):
        # 实现新功能
        pass
```

### 添加新组件
```python
# 在views/components中添加新组件
class NewWidget:
    def __init__(self, parent):
        self.parent = parent
        self.setup_ui()
    
    def setup_ui(self):
        # 设置UI
        pass
```

## 📞 技术支持

如遇问题，请按以下顺序检查：
1. 运行安装检查脚本
2. 查看错误信息
3. 检查系统要求
4. 验证文件完整性

## 📄 许可证

本项目采用MIT许可证，可自由使用和修改。

---

**🎉 享受高效的文件重命名体验！**